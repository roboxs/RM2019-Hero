#include <driver_filter.h>



double NUM[18] = {
  0.0001539807224874,-0.001633551718237, 0.008285871521075, -0.02655137141783,
    0.05976268341326, -0.09892004512411,   0.1209510267949,  -0.1024952672175,
    0.04044670396161,  0.04044670396161,  -0.1024952672175,   0.1209510267949,
   -0.09892004512411,  0.05976268341326, -0.02655137141783, 0.008285871521075,
  -0.001633551718237,0.0001539807224874
};
double DEN[18] = {
                   1,   -12.83384996104,    77.93650732675,   -297.3335694968,
      797.9129616887,   -1597.972651706,    2472.494945198,   -3018.357074163,
      2942.681165509,   -2303.842335957,    1448.206814835,   -726.6729407251,
      287.4544421962,   -87.75235536838,    19.96212762001,      -3.188300212,
     0.3191936459711, -0.01508036852769
};

double Chebyshev50HzLPF(Filter_t *F)
{
	int i;
	for(i=17; i>0; i--)
	{
		F->ybuf[i] = F->ybuf[i-1]; 
		F->xbuf[i
		] = F->xbuf[i-1];
	}
	F->xbuf[0] = F->raw_value;
	F->ybuf[0] = NUM[0] * F->xbuf[0];
	for(i=1;i<18;i++)
	{
		F->ybuf[0] = F->ybuf[0] + NUM[i] * F->xbuf[i] - DEN[i] * F->ybuf[i];
	}
	F->filtered_value = F->ybuf[0];
	return F->filtered_value;
}
